<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="iC6pF~/(m6G}Wzet=S~:">moveType</variable><variable id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</variable><variable id="-X(~sh(tbdqXx:7+)[bU">movementCounter</variable><variable id="g?+%^C#MtOFl+NTjAf%U">MOVE_SPEED</variable><variable id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</variable><variable id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</variable><variable id="!e9vs/~IwS9XIb;./A}d">correctionTime</variable><variable id="k}(0t^lgxo;l67C{R.Pf">ROTATION_CORRECTION_FACTOR</variable><variable id="5x9f^?i9BP-Ykn5e4e3=">SHORT_DELAY</variable><variable id="!0rq^rF]MPmuj[3HKlUX">lastSoundLevel</variable><variable id="PHqMY4E@p=4j`PRh%(`P">SOUND_THRESHOLD</variable><variable id="qBCk*UpJ`m1t[.(n?E0|">beatDetected</variable><variable id="eg1bj;oc(H4Mc.%c%#S;">isDancing</variable><variable id="Tr)DLXkA}!L1e!/wP?OE">SWING_ANGLE</variable><variable id="LfFs2^kwtR/JP]m:[8hn">ARM_LEFT_SERVO</variable><variable id="6vS!u.R+Ehi4ZUi|uc+}">ARM_RIGHT_SERVO</variable><variable id="q1%$!`xALG]+4_(PfT%=">leftArmCenter</variable><variable id="H7bbu+06MMq?8PF|ksU1">rightArmCenter</variable></variables><comment id="l$l.9Fx+)w}-l4cF59?R" x="2538" y="0" w="480" h="120">
Bit:Bot Pro Dancing Robot with Microphone Beat Detection and Position Correction
Uses MakeCode Bit:Bot extension (for Bit:Bot Classic/Pro).
</comment><block type="pxt-on-start" id="wx~5]fobv#W,vaDc4@PX" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="uo1+28f[T=Jo6z;6Wc`!"><field name="VAR" id="Tr)DLXkA}!L1e!/wP?OE">SWING_ANGLE</field><comment pinned="false" h="80" w="160">Configuration Constants</comment><data>0</data><value name="VALUE"><shadow type="math_number" id="2O^8[%LT%ko)J/xIQ~*H"><field name="NUM">45</field></shadow></value><next><block type="variables_set" id="`R.(aa5Lz]4r*I3@Tm-d"><field name="VAR" id="g?+%^C#MtOFl+NTjAf%U">MOVE_SPEED</field><value name="VALUE"><shadow type="math_number" id="~N.TdY!c|mnFhM6,?:?8"><field name="NUM">40</field></shadow></value><next><block type="variables_set" id="ohGljVsh-)Ww%$^Z3$?B"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field><value name="VALUE"><shadow type="math_number" id="Wt5RpI+$B+;J[jS.(A:8"><field name="NUM">40</field></shadow></value><next><block type="variables_set" id="7X{x0_]jbEsQ;dX-*1!/"><field name="VAR" id="PHqMY4E@p=4j`PRh%(`P">SOUND_THRESHOLD</field><value name="VALUE"><shadow type="math_number" id=":Xn(ne^jN-zL+k5XZH4@"><field name="NUM">80</field></shadow></value><next><block type="variables_set" id="-%]zqjoNGz5?*FzbCf4."><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field><value name="VALUE"><shadow type="math_number" id="soFnID}cTF_i9$RTGuO["><field name="NUM">500</field></shadow></value><next><block type="variables_set" id="kQ;.W6l%viU*TsnvD{.s"><field name="VAR" id="5x9f^?i9BP-Ykn5e4e3=">SHORT_DELAY</field><value name="VALUE"><shadow type="math_number" id="VwW!Hv7U`USqhh(cuG|P"><field name="NUM">50</field></shadow></value><next><block type="variables_set" id="d^9fN]zFhB!436;e*NeD"><field name="VAR" id="LfFs2^kwtR/JP]m:[8hn">ARM_LEFT_SERVO</field><value name="VALUE"><shadow type="math_number" id="p#uN*dXhLp5UFEN=|V0]"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="kA(T:jA1:9:J_PuPh9Fk"><field name="VAR" id="6vS!u.R+Ehi4ZUi|uc+}">ARM_RIGHT_SERVO</field><value name="VALUE"><shadow type="math_number" id="/z/qS:H-JTL@|T+Up=)2"><field name="NUM">2</field></shadow></value><next><block type="variables_set" id="~/!rGF%8KJ708A@TLI8p"><field name="VAR" id="k}(0t^lgxo;l67C{R.Pf">ROTATION_CORRECTION_FACTOR</field><comment pinned="false" h="80" w="160">Adjust this (0.8 - 1.0)</comment><value name="VALUE"><shadow type="math_number" id="k.#3Ni{{Y2,owf)L`aJi"><field name="NUM">0.95</field></shadow></value><next><block type="variables_set" id="Wvrx7B[zMfGr:0|k9Q0-"><field name="VAR" id="q1%$!`xALG]+4_(PfT%=">leftArmCenter</field><comment pinned="false" h="80" w="160">Global Variables</comment><value name="VALUE"><shadow type="math_number" id="UkjZ`G{jA0uqKB[om^X("><field name="NUM">90</field></shadow></value><next><block type="variables_set" id="a-,V0$/V]jJd/2asJ:Gc"><field name="VAR" id="H7bbu+06MMq?8PF|ksU1">rightArmCenter</field><value name="VALUE"><shadow type="math_number" id="F$i4Is}07+Ym*MF2=0zs"><field name="NUM">90</field></shadow></value><next><block type="typescript_statement" id="zi}ZV_9wZ^I(N9`l@vKZ"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_LEFT_SERVO, leftArmCenter);" numlines="1"></mutation><next><block type="typescript_statement" id="8af-O3j^AiiODbi$YV+-"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_RIGHT_SERVO, rightArmCenter);" numlines="1"></mutation><next><block type="device_pause" id="on9U=`_Ie+9;V7{m{RP5"><value name="pause"><shadow type="timePicker" id="zX1$H#;!.!cowT7@=,i{"><field name="ms">500</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="9,cOx0-pIoV$y+VEbusw" x="526" y="0"><comment pinned="false" h="80" w="160">Optional: Display sound level</comment><statement name="HANDLER"><block type="device_plot_bar_graph" id="LjmirNt(8!6,$k[gPdN{"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="value"><block type="variables_get" id="$qeyu^~h!LxT5q1rbPx]"><field name="VAR" id="!0rq^rF]MPmuj[3HKlUX">lastSoundLevel</field></block></value><value name="high"><shadow type="math_number" id="P#};qIS@-M%%*Tp74U,s"><field name="NUM">255</field></shadow></value></block></statement></block><block type="device_forever" id="!C)BK94-jkT1W48VzJ6*" x="927" y="0"><comment pinned="false" h="80" w="160">Main Loop</comment><statement name="HANDLER"><block type="variables_set" id="}CA{]Vw~UKDNpo?NHq$W"><field name="VAR" id="!0rq^rF]MPmuj[3HKlUX">lastSoundLevel</field><value name="VALUE"><shadow type="math_number" id="DS@Q^~K5c;jRz~1jB{:G"><field name="NUM">0</field></shadow><block type="device_get_sound_level" id="Ra%`*DvsGk@kWojAm^@R"></block></value><next><block type="controls_if" id="fZxZ[:=B/s^0%j@iXuV]"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="*#7yEvuqIaU0rpA#C{IA"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="}4-wO$v88,vWUOpT3MCf"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="ITU2$eYhGt#.Hp8EzjuG"><field name="NUM">0</field></shadow><block type="variables_get" id="5pFeRB=-_N+93^g}*0xv"><field name="VAR" id="!0rq^rF]MPmuj[3HKlUX">lastSoundLevel</field></block></value><value name="B"><shadow type="math_number" id="{|d/.TcF.tx/=v[%6*ul"><field name="NUM">0</field></shadow><block type="variables_get" id="Z}`L^^a|/4A(%PazzSaQ"><field name="VAR" id="PHqMY4E@p=4j`PRh%(`P">SOUND_THRESHOLD</field></block></value></block></value><statement name="DO0"><block type="controls_if" id="q,~2`Xm0Y#WR21_oC!6z"><value name="IF0"><shadow type="logic_boolean" id="setB5$prf@6~ZdVYRAv6"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="c)8-Iix[ZNo*@^HNTDnO"><value name="BOOL"><shadow type="logic_boolean" id="1$]f6TI(ZW][pF=C(5tV"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="I@?=i$#W3Lbql|kiIAU*"><field name="VAR" id="qBCk*UpJ`m1t[.(n?E0|">beatDetected</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="tLbaTs.:!W?|5Fj~j?F!"><field name="VAR" id="qBCk*UpJ`m1t[.(n?E0|">beatDetected</field><value name="VALUE"><shadow type="math_number" id="dOsJgmHO/eH@x6X)b!nY"><field name="NUM">0</field></shadow><block type="logic_boolean" id="*@-j9++E2Iv1uR,oC6}G"><field name="BOOL">TRUE</field></block></value><next><block type="controls_if" id="``NNh(k:iJqr*;`z=*g["><value name="IF0"><shadow type="logic_boolean" id="c_%jKGn/Lxw#b+CTvQ%/"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="!o_fF^2`~o2OHl#mZYf_"><value name="BOOL"><shadow type="logic_boolean" id="T2m#d.C0m.Nfeb2k@RM@"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="M[,0]}29F43GI%:DhA}j"><field name="VAR" id="eg1bj;oc(H4Mc.%c%#S;">isDancing</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="iS`h2kT-$5#~Yut?$nU6"><field name="VAR" id="eg1bj;oc(H4Mc.%c%#S;">isDancing</field><value name="VALUE"><shadow type="math_number" id="!MK/Xl3oYC,WvTQy?Hz?"><field name="NUM">0</field></shadow><block type="logic_boolean" id="IszoS|d58mzdf3bD%-{t"><field name="BOOL">TRUE</field></block></value><next><block type="function_call" id="U`M;Xx-(:S7]G.]JB3k!"><mutation name="danceStep" functionid=".2Ei*rTffZYE4o)xqY]-"></mutation><next><block type="variables_set" id="9)ZFM-5yqcucDn*GWl|@"><field name="VAR" id="eg1bj;oc(H4Mc.%c%#S;">isDancing</field><value name="VALUE"><shadow type="math_number" id="ZWEt/lC5cgOJ`[p:2(`."><field name="NUM">0</field></shadow><block type="logic_boolean" id="]yxiA{L:B[t9a4O2g5[6"><field name="BOOL">FALSE</field></block></value></block></next></block></next></block></statement></block></next></block></statement></block></statement><statement name="ELSE"><block type="variables_set" id="3MPr_CG2nZKh@|{-=@%x"><field name="VAR" id="qBCk*UpJ`m1t[.(n?E0|">beatDetected</field><value name="VALUE"><shadow type="math_number" id="{k+h3q(KL,PS21/7l,Fk"><field name="NUM">0</field></shadow><block type="logic_boolean" id="OuEcq4jC(o6[9el4fx{2"><field name="BOOL">FALSE</field></block></value></block></statement><next><block type="device_pause" id="F+*Ju$e;yw4Y*yf$LTfW"><value name="pause"><shadow type="timePicker" id="s1hd;ua6;PW$j.!Ed@5b"><field name="ms">20</field></shadow></value></block></next></block></next></block></statement></block><block type="function_definition" id="H~prYg%%ktl[e,!WAc`S" x="1539" y="0"><mutation name="danceStep" functionid=".2Ei*rTffZYE4o)xqY]-"></mutation><field name="function_name">danceStep</field><statement name="STACK"><block type="variables_set" id="oq;)iw%UcX,+MiOG^#/D"><field name="VAR" id="iC6pF~/(m6G}Wzet=S~:">moveType</field><comment pinned="false" h="80" w="160">Randomly choose a dance move</comment><value name="VALUE"><shadow type="math_number" id="0_ef))qtu$pouLV$S?8r"><field name="NUM">0</field></shadow><block type="device_random_deprecated" id="Hmo3m3;xb49sVeFZbu0Q"><value name="min"><shadow type="math_number" id="K.IDnLZD8Z;ru[C)y@zZ"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id=":@Z;cU$H=BQ6#DUQzh7+"><field name="NUM">2</field></shadow></value></block></value><next><block type="typescript_statement" id="_K!pB]=[S7A8N0+Kf$q{"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_LEFT_SERVO, leftArmCenter + SWING_ANGLE);" numlines="1"></mutation><next><block type="typescript_statement" id="S`|VJw$:YZv{|dHu$/t^"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_RIGHT_SERVO, rightArmCenter - SWING_ANGLE);" numlines="1"></mutation><next><block type="device_pause" id="K)IH6d|QN[oMhoh,0|c`"><value name="pause"><shadow type="timePicker" id="T*kg(sc$x.Q}^l];7Xe+"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="y$UiC#ll6eb!a%3q3XoH"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="W^|zyIOGJ{xRnH}yKctc"><field name="NUM">0</field></shadow><block type="variables_get" id="r~#IP/-]};HSy1C1Zdzs"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="x2KB*i|k*sD{Wi/P}5c^"><field name="NUM">4</field></shadow></value></block></value><next><block type="typescript_statement" id="~kLRj)D@c!9=R[C_wiV~"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_LEFT_SERVO, leftArmCenter - SWING_ANGLE);" numlines="1"></mutation><next><block type="typescript_statement" id="1tXti@z(1J/^.B;#|oU!"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_RIGHT_SERVO, rightArmCenter + SWING_ANGLE);" numlines="1"></mutation><next><block type="device_pause" id="];?a@n7h+~oVBtxFUP$n"><value name="pause"><shadow type="timePicker" id="Oa[bnPgznO2x@1]a[}z^"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="mR@_v+BF^2$wh#g?vXOX"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="h|N[[kN#TduU%B85cHnd"><field name="NUM">0</field></shadow><block type="variables_get" id=",C6_.WL,0G/Y{h@+aWkT"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="60Z~1MQs:ZM)ig#eYxC*"><field name="NUM">4</field></shadow></value></block></value><next><block type="controls_if" id="7.2#ZRmBfCC7zt0FZ[n?"><mutation elseif="1" else="1"></mutation><comment pinned="false" h="80" w="160">Perform the chosen move
No rotation tracking needed for forward/backward</comment><value name="IF0"><shadow type="logic_boolean" id="(]57x[}{NI~8iQ:l%@?r"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="uQSM(yRP!?=vaS?!JGqk"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="t+T9:@Ve!)/#C:_HEy4V"><field name="NUM">0</field></shadow><block type="variables_get" id="ADU?`PU~bLP})MSv9uGh"><field name="VAR" id="iC6pF~/(m6G}Wzet=S~:">moveType</field></block></value><value name="B"><shadow type="math_number" id="Tt~^~pv2%F0F=^.3fN~#"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="controls_if" id="^RTyAu!4ssf,[OOE2M.q"><mutation else="1"></mutation><comment pinned="false" h="80" w="160">Forward/Backward</comment><value name="IF0"><shadow type="logic_boolean" id="i!7thurEWt+.y:[1UZeW"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="I2@nxWePDz61u+XM}JA0"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="vRmU{!=mKy:SqyQ6OJVF"><field name="NUM">0</field></shadow><block type="math_modulo" id="W2R,B+Zwzi9wiQQ(M])C"><value name="DIVIDEND"><shadow type="math_number" id="SwE4flRpfMN|*iFX|fIQ"><field name="NUM">0</field></shadow><block type="variables_get" id="3k#8Y1O*lil.MEX9AQtg"><field name="VAR" id="-X(~sh(tbdqXx:7+)[bU">movementCounter</field></block></value><value name="DIVISOR"><shadow type="math_number" id="$^^B`jN93-!Rl~wAYP1L"><field name="NUM">2</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="Eu9GCUr^%0deL#U7-T}@"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="bitbot_motor" id="qg~EZQC}s~f40Ghl%|+l"><field name="motor">BBMotor.Both</field><value name="speed"><shadow type="math_number_minmax" id="+$Mu_*2K3|`*G%ABLR/d"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="fd]h=]]TM[EU4g[UcgV{"><field name="VAR" id="g?+%^C#MtOFl+NTjAf%U">MOVE_SPEED</field></block></value><next><block type="device_pause" id="p~Q/ySwtA%,vzc@vPtA_"><value name="pause"><shadow type="timePicker" id="#ret^(?70#mZCLj#;?s_"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="V^{-rt8nm2XX([GPtznW"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="x54vOGa+L;#bTb|TlLdf"><field name="NUM">0</field></shadow><block type="variables_get" id="QYY|M9j`zqyvl{e#;um="><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id=".6:JbW7.J-=9=$kcDD7G"><field name="NUM">2</field></shadow></value></block></value><next><block type="BBstop" id="?w(N?;o*^0Ei1V[q5}v,"><field name="mode">BBStopMode.Brake</field></block></next></block></next></block></statement><statement name="ELSE"><block type="bitbot_motor" id="F1I}8}M+QplnW-Eia`E_"><field name="motor">BBMotor.Both</field><value name="speed"><shadow type="math_number_minmax" id="}OHbi1dM[HBd_::te}Z^"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="X=YodIs~#Ag$U~k`#?4|"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="gd@1NYpm8f~3OQR-M]Wg"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="B0O,D:4JT$5@#s+U*AV#"><field name="NUM">0</field></shadow><block type="variables_get" id="n,nMT2OHTI|*r@JcMJ]-"><field name="VAR" id="g?+%^C#MtOFl+NTjAf%U">MOVE_SPEED</field></block></value></block></value><next><block type="device_pause" id="Th!l;$!nvmu6BH5cKhYT"><value name="pause"><shadow type="timePicker" id="W`a=KO@@GH_j)2$.xq@F"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="3tjcxq(kVHwiL,g,oo!8"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="am4k4i*B!K*#RwhJBl?:"><field name="NUM">0</field></shadow><block type="variables_get" id="H7a`+ucMa6Hv=(O$TKDK"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="([edPof0/~x]+:U~~R!L"><field name="NUM">2</field></shadow></value></block></value><next><block type="BBstop" id="L4,`4b1VBrE1}q6$_kt|"><field name="mode">BBStopMode.Brake</field></block></next></block></next></block></statement></block></statement><value name="IF1"><shadow type="logic_boolean" id="u!Cveo8[6]ci^XCx9)r9"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=";}JjGFJacF~sJ;zBF|m*"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="N,ZRVTgg0d~Q@89(Yo1p"><field name="NUM">0</field></shadow><block type="variables_get" id="0JKiqR`GF#^$_hsstrMG"><field name="VAR" id="iC6pF~/(m6G}Wzet=S~:">moveType</field></block></value><value name="B"><shadow type="math_number" id="]C0/*D6Bk_Hf7VE9r=^J"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="bitbot_motor" id="9[ZT--{?[o?vrlOiuu/_"><field name="motor">BBMotor.Left</field><comment pinned="false" h="80" w="160">Rotate Left</comment><value name="speed"><shadow type="math_number_minmax" id="X+taW0=kca{O/P|Tza@W"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="[F#vYM4X7vn0ITew)pMo"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="T,IG{#@U3z=!0+/#jZ#!"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="YE||GxEMYZmJSEvUV%,0"><field name="NUM">0</field></shadow><block type="variables_get" id="j$.J6T1gP^nR|)Pqc*@n"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value></block></value><next><block type="bitbot_motor" id="M99@;0oSYp`!nxI|n{+,"><field name="motor">BBMotor.Right</field><value name="speed"><shadow type="math_number_minmax" id="t,8v9mOL9sV$J6scYx0b"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="bdhC4w7AgE)2RaH+xOV|"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value><next><block type="device_pause" id="$~5/ynFmCc]w9^h;jvI/"><value name="pause"><shadow type="timePicker" id="IO)xy)rwY7t(lg-_#$X|"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="t0_1BhTuUXc,J=1;vstx"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="rDtvzI/YAS4,RPUDW5Vb"><field name="NUM">0</field></shadow><block type="variables_get" id="6%|rhh^T1O16!F+(2:`k"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="Z7.r1zG?qg`]:V.54nZT"><field name="NUM">2</field></shadow></value></block></value><next><block type="BBstop" id="f[[Y,a=yvoZ9F9/BtI6."><field name="mode">BBStopMode.Brake</field><next><block type="variables_change" id="1WI{xDbj#cL!Z$[JxY#M"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field><comment pinned="false" h="80" w="160">Track rotation (negative for left)</comment><value name="VALUE"><shadow type="math_number" id="k6IhW8t`R6-mWZ#kX18i"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="y-90]D(ta%ZpLZkf`dai"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="7L:8u8f1c[Qh~$%KhZ@N"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="VGqFa_4~rc,Ubzk~I}To"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="/?jHNQ6Ttj%Cv:pBhKwS"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="-y9Pl-;;)xQ%X721G(m-"><field name="NUM">0</field></shadow><block type="variables_get" id="d|wb{baz59WaaQLS57PJ"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="Nb=.CcZ+x[HYJ|_Xdn.~"><field name="NUM">2</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="bitbot_motor" id="?Cwj8^caxpjSo.t?M,zy"><field name="motor">BBMotor.Left</field><comment pinned="false" h="80" w="160">Rotate Right</comment><value name="speed"><shadow type="math_number_minmax" id="QX:-DI^haS*ryNuzBdK@"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="b?pymF(Myq$jNws3@!3%"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value><next><block type="bitbot_motor" id="AO_x!1MPb!$l?)@mEpR%"><field name="motor">BBMotor.Right</field><value name="speed"><shadow type="math_number_minmax" id="]QXUfewpa8j:-1M2ww6!"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="aNmk{.][I8E*0UbbBT6l"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="`vh8;q($}2[1z+|/O/,:"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="Ws,k~g-J(P^v4$GZQ(*^"><field name="NUM">0</field></shadow><block type="variables_get" id="xX#?q-XGI=iN,FuvBp4b"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value></block></value><next><block type="device_pause" id="KQtx2_3T3os*vSS@v5~:"><value name="pause"><shadow type="timePicker" id="#D//BopLjtg8$g2hVVMq"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="kXrpT;fIyk}];bgA[=H+"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="4.btgRu(0l:hxU4C,76)"><field name="NUM">0</field></shadow><block type="variables_get" id="fk!XS^Xb=YG^)]Cr64;D"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="_sdHXb7tB#qm$V7DFp5i"><field name="NUM">2</field></shadow></value></block></value><next><block type="BBstop" id="E12X`:}u~}1j#vd.tGtA"><field name="mode">BBStopMode.Brake</field><next><block type="variables_change" id="6Mzb1!_Tej4eTU*D8#dj"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field><comment pinned="false" h="80" w="160">Track rotation (positive for right)</comment><value name="VALUE"><shadow type="math_number" id="cxy_:i+[uK,6I_UfZdyO"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="DiD/_VfJWRHf(1Y2r^4b"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="Fe.ZUJJL|7~0%w@{ALrD"><field name="NUM">0</field></shadow><block type="variables_get" id="=+wmL}b@T!+ih:MCiMyb"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="0s8KAvRyNuy=;}Os=Mz$"><field name="NUM">2</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement><next><block type="variables_change" id="#^9?JO[3C2Ha9(#drcTs"><field name="VAR" id="-X(~sh(tbdqXx:7+)[bU">movementCounter</field><value name="VALUE"><shadow type="math_number" id="v#_6#2z~EL+7pmoug{7E"><field name="NUM">1</field></shadow></value><next><block type="controls_if" id="]=0fzJ`ly69Cx0UV#{Rc"><comment pinned="false" h="80" w="160">Corrective Rotation (if needed)</comment><value name="IF0"><shadow type="logic_boolean" id="Op,wV`j`(:ecA)^SNIdK"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="l$0qJl7p`[vHB^qT3(mU"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="Nj%N1M]8a5,4rco[0mAX"><field name="NUM">0</field></shadow><block type="math_op3" id=";zX%^c8KjE,e%:BEsYrw"><value name="x"><block type="variables_get" id="Uz,@fH30.rrYI6XvvnxY"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field></block></value></block></value><value name="B"><shadow type="math_number" id="/,:2!eBh{Be}l!X8Vm+w"><field name="NUM">0</field></shadow><block type="variables_get" id="V[}eXQ7!vgnZv~;MRUc-"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="45b_Zbk2N9l+KTuwnbhc"><field name="VAR" id="!e9vs/~IwS9XIb;./A}d">correctionTime</field><value name="VALUE"><shadow type="math_number" id="3NEtg*}.a,,h!yf6{/oF"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="[Qja1YWq~=)UAIWxm0=:"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="OBrvODK_:I(8_Y[saZqF"><field name="NUM">0</field></shadow><block type="math_op3" id="~U$|Yqs0PP^3J2#u^cjI"><value name="x"><block type="variables_get" id="-XqUDh/t@LpK912IW4s."><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field></block></value></block></value><value name="B"><shadow type="math_number" id="/|K:cbX(f9?j!Xt.AM0}"><field name="NUM">0</field></shadow><block type="variables_get" id="1ln,,ie3t/OE):Bo@eN("><field name="VAR" id="k}(0t^lgxo;l67C{R.Pf">ROTATION_CORRECTION_FACTOR</field></block></value></block></value><next><block type="controls_if" id="gbD#0~DqYO+=TN(pvp_L"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="eDGW|loXq#)0F@IO|W%3"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="#-YHC$lGG3f:5=nuajdT"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="^6-:=x4yJFBd76$J8`No"><field name="NUM">0</field></shadow><block type="variables_get" id="Dl7S~#F.mtn`1}j71{]x"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field></block></value><value name="B"><shadow type="math_number" id="=)CS[gGn?dVd0G5/9`R6"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="bitbot_motor" id="y)YfGh(OH?n@Ui7(Ljda"><field name="motor">BBMotor.Left</field><comment pinned="false" h="80" w="160">Correct for rightward drift</comment><value name="speed"><shadow type="math_number_minmax" id="|iHXUDP{HH.lKsPBDv~{"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="Fq)!n*PNmnVCJ@5=;77c"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="5+!u8(i;8MO|[B[))g9|"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="ICB!OU+;vJP$guGZuYXQ"><field name="NUM">0</field></shadow><block type="variables_get" id="|z%v$;?.OeIO-=dJ%d$P"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value></block></value><next><block type="bitbot_motor" id="%~]Axy{Z,vu[7{.HxYfu"><field name="motor">BBMotor.Right</field><value name="speed"><shadow type="math_number_minmax" id="n30KP}^(/9pf[RrE7X*a"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id=",Q+6,NQo?mm;T2wy~Eh+"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value><next><block type="device_pause" id="k$xc~IFFToNr[#b4@m+A"><value name="pause"><shadow type="timePicker" id="cHpVP_ZV@WGvF1(]+]5="><field name="ms">NaN</field></shadow><block type="variables_get" id="6wf*ExBC%73b(HQT1pi@"><field name="VAR" id="!e9vs/~IwS9XIb;./A}d">correctionTime</field></block></value><next><block type="BBstop" id="T{!QB;mjz%03L=/5GYi!"><field name="mode">BBStopMode.Brake</field></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="bitbot_motor" id="IzHFYyOdFN60xf#.8MyM"><field name="motor">BBMotor.Left</field><comment pinned="false" h="80" w="160">Correct for leftward drift</comment><value name="speed"><shadow type="math_number_minmax" id="!6qziWeeNwnJ`P/~]RB_"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="aeA%-C+6K8P}-SFat;5y"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value><next><block type="bitbot_motor" id="rV{yigm]Gnt2IWLZ[kLk"><field name="motor">BBMotor.Right</field><value name="speed"><shadow type="math_number_minmax" id="OCh~lgS]}d-e=+tnEp~["><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="=ECpzdjT~_~P]eLL`Zq6"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="2n7ms`%4#xyV7rQt5mrY"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="QY,,m67^^nq:?{M{[El#"><field name="NUM">0</field></shadow><block type="variables_get" id="MoVyT+O4FbGrwm,_%FVQ"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value></block></value><next><block type="device_pause" id="9JWzGWZ@qSLGk|HM*w2l"><value name="pause"><shadow type="timePicker" id="c2B$uF2$$bC=ck^q;Owb"><field name="ms">NaN</field></shadow><block type="variables_get" id="iq7!HJ9$I/BI$jI=kN]f"><field name="VAR" id="!e9vs/~IwS9XIb;./A}d">correctionTime</field></block></value><next><block type="BBstop" id=";I6tx{*Hco#[?^YkTQ2M"><field name="mode">BBStopMode.Brake</field></block></next></block></next></block></next></block></statement><next><block type="variables_set" id="[!Ybm}R9pw.3O:PM[6(I"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field><comment pinned="false" h="80" w="160">Reset after correction</comment><value name="VALUE"><shadow type="math_number" id="Xy?rXXP(Kid)CTpg@%%O"><field name="NUM">0</field></shadow></value></block></next></block></next></block></statement><next><block type="typescript_statement" id=")ek7i8%f89{T^raiwsk("><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_LEFT_SERVO, leftArmCenter);" numlines="1"></mutation><next><block type="typescript_statement" id="Kt5y8*_cyij{6]5}c-_+"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_RIGHT_SERVO, rightArmCenter);" numlines="1"></mutation><next><block type="device_pause" id="6J?v=7Cr|$szPqwNhIiq"><value name="pause"><shadow type="timePicker" id="b50-MVaWhmz@|}tFx;wg"><field name="ms">NaN</field></shadow><block type="variables_get" id="w6pf4pAU*n[au~oW)GkW"><field name="VAR" id="5x9f^?i9BP-Ykn5e4e3=">SHORT_DELAY</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>