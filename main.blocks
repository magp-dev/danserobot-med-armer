<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="iC6pF~/(m6G}Wzet=S~:">moveType</variable><variable id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</variable><variable id="-X(~sh(tbdqXx:7+)[bU">movementCounter</variable><variable id="g?+%^C#MtOFl+NTjAf%U">MOVE_SPEED</variable><variable id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</variable><variable id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</variable><variable id="!e9vs/~IwS9XIb;./A}d">correctionTime</variable><variable id="k}(0t^lgxo;l67C{R.Pf">ROTATION_CORRECTION_FACTOR</variable><variable id="5x9f^?i9BP-Ykn5e4e3=">SHORT_DELAY</variable><variable id="!0rq^rF]MPmuj[3HKlUX">lastSoundLevel</variable><variable id="PHqMY4E@p=4j`PRh%(`P">SOUND_THRESHOLD</variable><variable id="qBCk*UpJ`m1t[.(n?E0|">beatDetected</variable><variable id="eg1bj;oc(H4Mc.%c%#S;">isDancing</variable><variable id="Tr)DLXkA}!L1e!/wP?OE">SWING_ANGLE</variable><variable id="LfFs2^kwtR/JP]m:[8hn">ARM_LEFT_SERVO</variable><variable id="6vS!u.R+Ehi4ZUi|uc+}">ARM_RIGHT_SERVO</variable><variable id="q1%$!`xALG]+4_(PfT%=">leftArmCenter</variable><variable id="H7bbu+06MMq?8PF|ksU1">rightArmCenter</variable></variables><comment id="LeE0F,n%#4gM2+$l0AV," x="2538" y="0" w="480" h="120">
Bit:Bot Pro Dancing Robot with Microphone Beat Detection and Position Correction
Uses MakeCode Bit:Bot extension (for Bit:Bot Classic/Pro).
</comment><block type="pxt-on-start" id="d#Rfk1pyNg,7IIw$jiH5" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="#tOw,9nG)xlw$*FDwDf0"><field name="VAR" id="Tr)DLXkA}!L1e!/wP?OE">SWING_ANGLE</field><comment pinned="false" h="80" w="160">Configuration Constants</comment><data>0</data><value name="VALUE"><shadow type="math_number" id="}7%:S(|9B|be[Xz/e/)2"><field name="NUM">90</field></shadow></value><next><block type="variables_set" id="pl0js()DbH`2(~fN=RVH"><field name="VAR" id="g?+%^C#MtOFl+NTjAf%U">MOVE_SPEED</field><value name="VALUE"><shadow type="math_number" id="P:T.Smh+^KVj?!C7rj,V"><field name="NUM">40</field></shadow></value><next><block type="variables_set" id="Pn;VGV+d9.cUiXGvr8o("><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field><value name="VALUE"><shadow type="math_number" id="S=g%J0QOV8{HAHn1fIfp"><field name="NUM">40</field></shadow></value><next><block type="variables_set" id="LQmI3uvGWUQqqfCS4Ku}"><field name="VAR" id="PHqMY4E@p=4j`PRh%(`P">SOUND_THRESHOLD</field><value name="VALUE"><shadow type="math_number" id="adym_TnVo-_jAt@uI#wD"><field name="NUM">80</field></shadow></value><next><block type="variables_set" id="B%1uHQxM30gS_)QRGYKI"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field><value name="VALUE"><shadow type="math_number" id="-.|ri.hPOtkBCyLkzxuY"><field name="NUM">500</field></shadow></value><next><block type="variables_set" id="@:`F]rA/5DmMV@u#A1~B"><field name="VAR" id="5x9f^?i9BP-Ykn5e4e3=">SHORT_DELAY</field><value name="VALUE"><shadow type="math_number" id="kA#wn=pxW!r;YW%14#uZ"><field name="NUM">50</field></shadow></value><next><block type="variables_set" id="x04er`od?l`x*)Bv`G4m"><field name="VAR" id="LfFs2^kwtR/JP]m:[8hn">ARM_LEFT_SERVO</field><value name="VALUE"><shadow type="math_number" id="$SoX]=OO6-BxDpX0R/%o"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="]~FS,ECtw75nl;mQ{xpv"><field name="VAR" id="6vS!u.R+Ehi4ZUi|uc+}">ARM_RIGHT_SERVO</field><value name="VALUE"><shadow type="math_number" id="#mQ;d*;H)5Qh_X,FTEIq"><field name="NUM">2</field></shadow></value><next><block type="variables_set" id="`mUFJv8uB?Mc0d~79ekP"><field name="VAR" id="k}(0t^lgxo;l67C{R.Pf">ROTATION_CORRECTION_FACTOR</field><comment pinned="false" h="80" w="160">Adjust this (0.8 - 1.0)</comment><value name="VALUE"><shadow type="math_number" id="5^$%h7fFIIkb5$[)+Cl!"><field name="NUM">0.95</field></shadow></value><next><block type="variables_set" id="F)l7T+i?vDq3Fp0-D|=3"><field name="VAR" id="q1%$!`xALG]+4_(PfT%=">leftArmCenter</field><comment pinned="false" h="80" w="160">Global Variables</comment><value name="VALUE"><shadow type="math_number" id="rft=V(HUVHwTp+I6:PbH"><field name="NUM">90</field></shadow></value><next><block type="variables_set" id="./g5*kAvL@~^]RtWE+Zt"><field name="VAR" id="H7bbu+06MMq?8PF|ksU1">rightArmCenter</field><value name="VALUE"><shadow type="math_number" id="9tqgP$f,b54.twej(K_E"><field name="NUM">90</field></shadow></value><next><block type="typescript_statement" id="+DF:dTyNR96E#wYMaign"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_LEFT_SERVO, leftArmCenter);" numlines="1"></mutation><next><block type="typescript_statement" id="]K9!2PWL0gc=46Ivfl:("><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_RIGHT_SERVO, rightArmCenter);" numlines="1"></mutation><next><block type="device_pause" id="d+agx7f!d(mr_KA2v}Qg"><value name="pause"><shadow type="timePicker" id="7+WG%U!NhmJ~N-J,eKDQ"><field name="ms">500</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="H@fUJ1]8GfnJe3zQ,*MP" x="526" y="0"><comment pinned="false" h="80" w="160">Optional: Display sound level</comment><statement name="HANDLER"><block type="device_plot_bar_graph" id="+1T:u*1Ras-?na/fglMo"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="value"><block type="variables_get" id=".Pj58lVUs[H=+zM.n+i%"><field name="VAR" id="!0rq^rF]MPmuj[3HKlUX">lastSoundLevel</field></block></value><value name="high"><shadow type="math_number" id="^#tXpKSmd*!?u#63AQmx"><field name="NUM">255</field></shadow></value></block></statement></block><block type="device_forever" id="xH#Fb@r@^$s3ksXwS~oT" x="927" y="0"><comment pinned="false" h="80" w="160">Main Loop</comment><statement name="HANDLER"><block type="variables_set" id=",UrLPSi(;DvG{m]fG4[H"><field name="VAR" id="!0rq^rF]MPmuj[3HKlUX">lastSoundLevel</field><value name="VALUE"><shadow type="math_number" id="UO/wZfjiCY[kxH8XXA5b"><field name="NUM">0</field></shadow><block type="device_get_sound_level" id="c#@7:1u*C]uV|~SQlf|b"></block></value><next><block type="controls_if" id="pzPVy{-kE?XGpmNJyY!L"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="u9wWtT}siWqi/B/x]:kt"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=".5${lsV)x0b|xI!oUUb."><field name="OP">GT</field><value name="A"><shadow type="math_number" id="tv(6Aya^4k2_jx[1LQ5$"><field name="NUM">0</field></shadow><block type="variables_get" id="/6Z+GHOk0c@ht#gFiy8g"><field name="VAR" id="!0rq^rF]MPmuj[3HKlUX">lastSoundLevel</field></block></value><value name="B"><shadow type="math_number" id="GEn_M}cGzJuv+pO0-%8$"><field name="NUM">0</field></shadow><block type="variables_get" id="%1w0Dwa(n,Y^?7s6|0ae"><field name="VAR" id="PHqMY4E@p=4j`PRh%(`P">SOUND_THRESHOLD</field></block></value></block></value><statement name="DO0"><block type="controls_if" id="FsgHixQE=PAd7qr[!b2d"><value name="IF0"><shadow type="logic_boolean" id="gf-zaBNjNRK2UrI-oik#"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="=UNxDz9r5tKpVIgWPFja"><value name="BOOL"><shadow type="logic_boolean" id="VVD)M;z1JK(dXfBBJkwp"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="_d%uQtnosF#-igk[mw,_"><field name="VAR" id="qBCk*UpJ`m1t[.(n?E0|">beatDetected</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="Q]}8`}xIs.qdS;T1fPeF"><field name="VAR" id="qBCk*UpJ`m1t[.(n?E0|">beatDetected</field><value name="VALUE"><shadow type="math_number" id="4}MI:iYL~n`1cw#uZ]TP"><field name="NUM">0</field></shadow><block type="logic_boolean" id="-~)h^NR5^,bGo5|OJL9R"><field name="BOOL">TRUE</field></block></value><next><block type="controls_if" id="SVcef=^*vK;p9KS/a_SU"><value name="IF0"><shadow type="logic_boolean" id="c/oJ9r`13d+J6Idh@gM|"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="|O~j#z2%*@RI@sDJc:Gd"><value name="BOOL"><shadow type="logic_boolean" id="l*AQA}A:HNJ!6wrmWZmG"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="b+]zs6@ZLslQtHNg:^%?"><field name="VAR" id="eg1bj;oc(H4Mc.%c%#S;">isDancing</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="vU`D?))HDDB%5ND]tP8X"><field name="VAR" id="eg1bj;oc(H4Mc.%c%#S;">isDancing</field><value name="VALUE"><shadow type="math_number" id="3a(pA[EcV)*[%wAk$`_Y"><field name="NUM">0</field></shadow><block type="logic_boolean" id="5F#`oz0NxETWi2A,eJq;"><field name="BOOL">TRUE</field></block></value><next><block type="function_call" id="`64$Mvz7.mdQcC/LUNb:"><mutation name="danceStep" functionid=".2Ei*rTffZYE4o)xqY]-"></mutation><next><block type="variables_set" id="wHzS4y(._CGI5K|V`LLe"><field name="VAR" id="eg1bj;oc(H4Mc.%c%#S;">isDancing</field><value name="VALUE"><shadow type="math_number" id="MK%-,RVkRJhS6~sFC/|#"><field name="NUM">0</field></shadow><block type="logic_boolean" id="wVGdze^~{r%!Q-A[.!-c"><field name="BOOL">FALSE</field></block></value></block></next></block></next></block></statement></block></next></block></statement></block></statement><statement name="ELSE"><block type="variables_set" id="4/qDUTN},VG@gN?[wLsB"><field name="VAR" id="qBCk*UpJ`m1t[.(n?E0|">beatDetected</field><value name="VALUE"><shadow type="math_number" id="nO[KHiGE59!P@ja=R5Ux"><field name="NUM">0</field></shadow><block type="logic_boolean" id="R9BI![~H`{``{!U}u8Hv"><field name="BOOL">FALSE</field></block></value></block></statement><next><block type="device_pause" id="Sw=7sVFnS2$g1L]bUmh,"><value name="pause"><shadow type="timePicker" id="n(nnsHH9}b0d;2IYH7Go"><field name="ms">20</field></shadow></value></block></next></block></next></block></statement></block><block type="function_definition" id="E7jmJ*{KZbndvcR:8~N!" x="1539" y="0"><mutation name="danceStep" functionid=".2Ei*rTffZYE4o)xqY]-"></mutation><field name="function_name">danceStep</field><statement name="STACK"><block type="variables_set" id="A|ML[Wd)Ypt0V2XmD{.^"><field name="VAR" id="iC6pF~/(m6G}Wzet=S~:">moveType</field><comment pinned="false" h="80" w="160">Randomly choose a dance move</comment><value name="VALUE"><shadow type="math_number" id="V^Q4ZO@nlM(voazm{NPD"><field name="NUM">0</field></shadow><block type="device_random_deprecated" id="d?tqrK+.oX%30(R4`3UZ"><value name="min"><shadow type="math_number" id="W#-nHvL7N[VS36r`ha/s"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id=";6})H`lu!=c:SIlf]gdz"><field name="NUM">2</field></shadow></value></block></value><next><block type="typescript_statement" id="6pGa_JbQ/5}5,h8J3:c#"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_LEFT_SERVO, leftArmCenter + SWING_ANGLE);" numlines="1"></mutation><next><block type="typescript_statement" id="_0)uqL=#/jL5MUYGcb-c"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_RIGHT_SERVO, rightArmCenter - SWING_ANGLE);" numlines="1"></mutation><next><block type="device_pause" id="6S:6a1HSjH~U4)8eQ_Jm"><value name="pause"><shadow type="timePicker" id="h+l^1|Pc4Zo-sg^j;UP)"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="I;3vb`k]f8u=oAGJdjgO"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="vPj=TK{Id!:mgRrTA})y"><field name="NUM">0</field></shadow><block type="variables_get" id="I:N*FE{0v0SR1)w(z0KQ"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id=",*!#AoRxH.HgjFru1qYz"><field name="NUM">4</field></shadow></value></block></value><next><block type="typescript_statement" id="BLes!M):^}bO9[Pc8^}K"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_LEFT_SERVO, leftArmCenter - SWING_ANGLE);" numlines="1"></mutation><next><block type="typescript_statement" id="j[(45=DVo(LY{3!hJE,~"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_RIGHT_SERVO, rightArmCenter + SWING_ANGLE);" numlines="1"></mutation><next><block type="device_pause" id="rBCAG!|6kG+kv4.4oLHe"><value name="pause"><shadow type="timePicker" id="Sh0U;9nh(qmY2Jp,`ugW"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="5+N`+SKkVDKA$}2-K#6]"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="scy~+4Jh?9yW~ybH_eH1"><field name="NUM">0</field></shadow><block type="variables_get" id="JX$lp#.2r@aKb}~RwJ9:"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="BCXuj8c2#?[wt.Cw*}Eb"><field name="NUM">4</field></shadow></value></block></value><next><block type="controls_if" id="3HLK2Rf(!ZsdFx#L.0GO"><mutation elseif="1" else="1"></mutation><comment pinned="false" h="80" w="160">Perform the chosen move
No rotation tracking needed for forward/backward</comment><value name="IF0"><shadow type="logic_boolean" id="Ar@^1j=+=q}w-Nk:S.qU"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="?%wX{UqS4$]~3dDSi2k-"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="r=PY(Gk?{gr:0`2M(E-T"><field name="NUM">0</field></shadow><block type="variables_get" id="MPM]yCrN7K|Wd=}yEP6m"><field name="VAR" id="iC6pF~/(m6G}Wzet=S~:">moveType</field></block></value><value name="B"><shadow type="math_number" id="QP35#}9c2r!slmMPz70`"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="controls_if" id=").~czKwB5uFUof6KkrpM"><mutation else="1"></mutation><comment pinned="false" h="80" w="160">Forward/Backward</comment><value name="IF0"><shadow type="logic_boolean" id="1$?KlO+De`Y=ov,EV5OO"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="mx+XcwrhztsTqDAzBb{5"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="ZOpt4lT0t617AP:KZ!=i"><field name="NUM">0</field></shadow><block type="math_modulo" id="Chk2x7t209X;n,:KG~Dt"><value name="DIVIDEND"><shadow type="math_number" id="MB}GkJ=@7mTRF4aYmQ?s"><field name="NUM">0</field></shadow><block type="variables_get" id="8Z2l.Cz_l_Tm=`lNzlg4"><field name="VAR" id="-X(~sh(tbdqXx:7+)[bU">movementCounter</field></block></value><value name="DIVISOR"><shadow type="math_number" id="$vcm7gSs/6oa0_0oJ,OJ"><field name="NUM">2</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="ljEl=Pr{G$3pBc#B_KtF"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="bitbot_motor" id="rML8iI::T:,Qz;]TY%?g"><field name="motor">BBMotor.Both</field><value name="speed"><shadow type="math_number_minmax" id="fPt9VMuuB8a00C5_clt2"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="LCMoPnJEWVMP4lZ**/3k"><field name="VAR" id="g?+%^C#MtOFl+NTjAf%U">MOVE_SPEED</field></block></value><next><block type="device_pause" id="HvbJ84s9LD9Ti2TxgDF7"><value name="pause"><shadow type="timePicker" id="zy1vLsTTh;7R9]fZ^laa"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="#b`r0GYY)Fx80O-Ux4C}"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="clBwx+RjSLug*KS2^i06"><field name="NUM">0</field></shadow><block type="variables_get" id="R~*DxT~-D!J$j|t|E*71"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="l.)8#i_867%!TY@frZ|K"><field name="NUM">2</field></shadow></value></block></value><next><block type="BBstop" id="jlN3u9N2Q1FoldCO86AN"><field name="mode">BBStopMode.Brake</field></block></next></block></next></block></statement><statement name="ELSE"><block type="bitbot_motor" id="BHncvcsW#?7B:{w+bRu_"><field name="motor">BBMotor.Both</field><value name="speed"><shadow type="math_number_minmax" id="cI(Uxb,]r0%BBqN;{hxI"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="2mN3g8VQrehM@!U(e19+"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="d?HRjZ:?=3QU/?V$#C^U"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id=";B|9y{)mfenX4+`VZ#jR"><field name="NUM">0</field></shadow><block type="variables_get" id="{[T.sm!F]fMFzloM(K-j"><field name="VAR" id="g?+%^C#MtOFl+NTjAf%U">MOVE_SPEED</field></block></value></block></value><next><block type="device_pause" id="dX!2b$)88l6Y^ty8IS7*"><value name="pause"><shadow type="timePicker" id="cuk5#!1b*5Htr{1n(4n{"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="S*OzhY,sICBGFY70rnVp"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="]MDXT%%6uG77rhpQpL5E"><field name="NUM">0</field></shadow><block type="variables_get" id="e=erufkJ0nwgWu_@oL[2"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="}{92;7=xs7/B%`7}h;$j"><field name="NUM">2</field></shadow></value></block></value><next><block type="BBstop" id="NL_le5,O_z`DD6:,t;Ll"><field name="mode">BBStopMode.Brake</field></block></next></block></next></block></statement></block></statement><value name="IF1"><shadow type="logic_boolean" id="}s5QxMvnZ;TX(1C@#4!q"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="?ufnCSFHZd~4y,9LdEi`"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="e)G54WFp0dJ~0RG67kq)"><field name="NUM">0</field></shadow><block type="variables_get" id="zU1j0gpa*$et=LKl5!NL"><field name="VAR" id="iC6pF~/(m6G}Wzet=S~:">moveType</field></block></value><value name="B"><shadow type="math_number" id="#:v46Y+}FYOqdJ:0x4CD"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="bitbot_motor" id="?!WBg2%Tjy[Dz.=,ZKBm"><field name="motor">BBMotor.Left</field><comment pinned="false" h="80" w="160">Rotate Left</comment><value name="speed"><shadow type="math_number_minmax" id="=8Ff:I];O0sR*n{+h.nH"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="$t~P|WhJ9PuHa(7y@U)F"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="jp4}q+#kv2OszQVFi.Ts"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="t-N=wQD[8`CPvZ-/;$#,"><field name="NUM">0</field></shadow><block type="variables_get" id="V/@6D=p;9K^2Yd%Z,U1~"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value></block></value><next><block type="bitbot_motor" id="H)H`k+l_I@qm]OPp7aj`"><field name="motor">BBMotor.Right</field><value name="speed"><shadow type="math_number_minmax" id="A;{HKPI#n^J*-vMMeM-2"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="bFw)8w-R,u9-`)hfiKip"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value><next><block type="device_pause" id="K#_Zy5DQO#svys-pl5L."><value name="pause"><shadow type="timePicker" id="9;Zf^,aQ@L~o2[z!wVT]"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="5c+[),Dh67`Ob./u`tpK"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="k3ZkEqd;0oSu;f:{2b?a"><field name="NUM">0</field></shadow><block type="variables_get" id="QlVF;N6HNg3Pjz?LjT-B"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="@a7|]ITau)NR-Igvsgc^"><field name="NUM">2</field></shadow></value></block></value><next><block type="BBstop" id="A?e?,!_dtt^GPz22aw=U"><field name="mode">BBStopMode.Brake</field><next><block type="variables_change" id="7tt0:bLk2gEQ8??tt)Cm"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field><comment pinned="false" h="80" w="160">Track rotation (negative for left)</comment><value name="VALUE"><shadow type="math_number" id="4?)jd!r)4|Z7^7M:|li!"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="hfI^%eQ8HvcZ$rF94.aq"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="hH~VpU(23CGMxFS4bn4*"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="mc.4t8V:`bO{oTEVd4Jc"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="I-kUswLf[$)|whwd9yGn"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="u4*f?+nEO_;(=upd|V?f"><field name="NUM">0</field></shadow><block type="variables_get" id="?(}n9yHx$E0Bqp}8$/lA"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="KLS=66$J:{Xxpay5e,R|"><field name="NUM">2</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="bitbot_motor" id="C72nRSN)1CLpAsz,8fp2"><field name="motor">BBMotor.Left</field><comment pinned="false" h="80" w="160">Rotate Right</comment><value name="speed"><shadow type="math_number_minmax" id="L@+m9CKv=_ap,kx+y}tn"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="YH$}fO%Jtmi?^{^(xm=o"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value><next><block type="bitbot_motor" id="IqxzXk4N$WZy]pXW#eYD"><field name="motor">BBMotor.Right</field><value name="speed"><shadow type="math_number_minmax" id="Qx?FAKwTVJX%KAPf49w$"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="-$+Tp8U-|c:yc:TQqk=="><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="c8XDLV#!w1a-MkN`!JUE"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="2)sD[ST!x!%3uZafs^5t"><field name="NUM">0</field></shadow><block type="variables_get" id="6kq18d9Ag~2}+evgWq@t"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value></block></value><next><block type="device_pause" id="wDMLsCH^*dM?xGuDIKL!"><value name="pause"><shadow type="timePicker" id="xLEe@]8owTb6p,|7I#B%"><field name="ms">NaN</field></shadow><block type="math_arithmetic" id="Zo!q+C^zxAXoY%bMzbt|"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="MMG#un_i1K_j,`@`hXGh"><field name="NUM">0</field></shadow><block type="variables_get" id="D@N+Ywp0;?8^@PT#!M`m"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="hL+o4:3724+k00,/3nZq"><field name="NUM">2</field></shadow></value></block></value><next><block type="BBstop" id="~%SJ$P#H@m_3vqX3tc@P"><field name="mode">BBStopMode.Brake</field><next><block type="variables_change" id="-t!dg~p9KimT91*VO/8s"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field><comment pinned="false" h="80" w="160">Track rotation (positive for right)</comment><value name="VALUE"><shadow type="math_number" id="qa[S~`L;]NDmPYx#(SL$"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="*[X=.mF4S$C9|rj9#K%l"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="~Hkq#PF_`EBT7hr}10;K"><field name="NUM">0</field></shadow><block type="variables_get" id="3BFCy+nD[v78:Y`C0scH"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value><value name="B"><shadow type="math_number" id="Z7rg^?aq[m(C,V/dku[+"><field name="NUM">2</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement><next><block type="variables_change" id="=x|Y^V2.Z[8|9lf/C(_6"><field name="VAR" id="-X(~sh(tbdqXx:7+)[bU">movementCounter</field><value name="VALUE"><shadow type="math_number" id="s6tV?V4qK`IN#Pln3Stg"><field name="NUM">1</field></shadow></value><next><block type="controls_if" id="z@6v)[we-U52^^)r]Oe:"><comment pinned="false" h="80" w="160">Corrective Rotation (if needed)</comment><value name="IF0"><shadow type="logic_boolean" id="U[F0b_5xlm0B[.JjBYS%"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="40ZeBm`ARjyKz$sd-j4X"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="4=Isw+eicr3*?v@)3!q3"><field name="NUM">0</field></shadow><block type="math_op3" id="Sg{/24SsI]fvPTi@MS]P"><value name="x"><block type="variables_get" id="5bZ7f]PVnWAP_u)7IP5g"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field></block></value></block></value><value name="B"><shadow type="math_number" id="IXNz2ipIP/db5Dx?Is1)"><field name="NUM">0</field></shadow><block type="variables_get" id="a^O10s[WqsXO#.lhkzwL"><field name="VAR" id="zHJ{*2z*!49QRMC79yYT">DANCE_DURATION</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="QslWFeMP-~d{C0aE}ad$"><field name="VAR" id="!e9vs/~IwS9XIb;./A}d">correctionTime</field><value name="VALUE"><shadow type="math_number" id="D^W7+@Ip,FL8U.CE=`2F"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="jFfFOhHm}hQ.EtJ//Cew"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="OkgBWyu~;BJf.|PC.RL7"><field name="NUM">0</field></shadow><block type="math_op3" id="DnmTwDSN),MR4ti!]:J?"><value name="x"><block type="variables_get" id="U#w(w7u3$//HQ6+rUSrr"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field></block></value></block></value><value name="B"><shadow type="math_number" id="~#9o6=;19qn#PKMxc0+("><field name="NUM">0</field></shadow><block type="variables_get" id="hVtcX*gCXd5$YO=Z*nvY"><field name="VAR" id="k}(0t^lgxo;l67C{R.Pf">ROTATION_CORRECTION_FACTOR</field></block></value></block></value><next><block type="controls_if" id="J5k830=#Obsej0$1XEii"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="s849_5+E)WCWQUt#In7c"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="D%raG;=`]VB8RCC`N_3o"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="XWv#Fr:qze{Y[V^boBzT"><field name="NUM">0</field></shadow><block type="variables_get" id="[0]J95rp~eJOxwGfYk~+"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field></block></value><value name="B"><shadow type="math_number" id="BlgnE]N_JO1+;8N3k=?l"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="bitbot_motor" id="kn+vC.e9x`+:9eTYOM%w"><field name="motor">BBMotor.Left</field><comment pinned="false" h="80" w="160">Correct for rightward drift</comment><value name="speed"><shadow type="math_number_minmax" id="jQ|XlQMlWW1z%}hsTj`Y"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="hI~7rwczmv)#1r0SgD%w"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="qxM*;HkT}65G?c(2IXTr"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="p-w09Xe3[(-8;pTr2*_p"><field name="NUM">0</field></shadow><block type="variables_get" id="9-qF98bZTe.AsYWwTe8V"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value></block></value><next><block type="bitbot_motor" id="bS-}!PTUQwB1Iv=r{gzG"><field name="motor">BBMotor.Right</field><value name="speed"><shadow type="math_number_minmax" id="uj~7!nmxfHOOHU!ubUzO"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="{p|iI#*ni|i()-:R0F8R"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value><next><block type="device_pause" id="Lu[K$90nOb,iEIJ/gt]Y"><value name="pause"><shadow type="timePicker" id="*RI6!VKh,BPt@-P_I_`R"><field name="ms">NaN</field></shadow><block type="variables_get" id="uyA5|lf%p?eDw=.Hk2zc"><field name="VAR" id="!e9vs/~IwS9XIb;./A}d">correctionTime</field></block></value><next><block type="BBstop" id="+F)SO`RY]TP^`^0dDr||"><field name="mode">BBStopMode.Brake</field></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="bitbot_motor" id="s;!iJ%[niKVI5N#ZF465"><field name="motor">BBMotor.Left</field><comment pinned="false" h="80" w="160">Correct for leftward drift</comment><value name="speed"><shadow type="math_number_minmax" id="SU}ij@p5GR[OwHTWi.]r"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="TUPp1uGjTW0AvBg8yf{o"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value><next><block type="bitbot_motor" id="wh0jw)YT{J^VXroJ~e6o"><field name="motor">BBMotor.Right</field><value name="speed"><shadow type="math_number_minmax" id="N,cgal[c05Ht!cR(RVTt"><mutation min="-1023" max="1023" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="md8tR:%h{pxq==#|oFq0"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="rjgd4i{R],]_Gl335R}+"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="THdQd+UYFd6~rN6-$rI_"><field name="NUM">0</field></shadow><block type="variables_get" id="vYc5TG-/$lW(90GIqzU%"><field name="VAR" id="-:A8s]|ObXmS;!Ttw0Y+">ROTATE_SPEED</field></block></value></block></value><next><block type="device_pause" id="Oc.j~/Fo@hK]zo|{f~vD"><value name="pause"><shadow type="timePicker" id="e!NqxqZvF:O(*@(X5IKk"><field name="ms">NaN</field></shadow><block type="variables_get" id="`O*ElG;lGsQs7`0M==0J"><field name="VAR" id="!e9vs/~IwS9XIb;./A}d">correctionTime</field></block></value><next><block type="BBstop" id="qyfYUCNj^ClqS^79}To-"><field name="mode">BBStopMode.Brake</field></block></next></block></next></block></next></block></statement><next><block type="variables_set" id="J~,$k2i2^HznMpdLH+UD"><field name="VAR" id="-C39nIq=xM:T=hVo3$)u">accumulatedRotation</field><comment pinned="false" h="80" w="160">Reset after correction</comment><value name="VALUE"><shadow type="math_number" id="Ua|*3ZC3[qhKsKGxoE*l"><field name="NUM">0</field></shadow></value></block></next></block></next></block></statement><next><block type="typescript_statement" id="x!U%8Gr.Lbe%,SIqW#kx"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_LEFT_SERVO, leftArmCenter);" numlines="1"></mutation><next><block type="typescript_statement" id="lY8g,r08n#pZ$wFH0@.0"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="bitbot.bbSetServo(ARM_RIGHT_SERVO, rightArmCenter);" numlines="1"></mutation><next><block type="device_pause" id="c!H)R7~h[LKw[tMp43UU"><value name="pause"><shadow type="timePicker" id="as_0CZh/7}I4{!~xT/rH"><field name="ms">NaN</field></shadow><block type="variables_get" id="`91da}X;;^$..ARr==-I"><field name="VAR" id="5x9f^?i9BP-Ykn5e4e3=">SHORT_DELAY</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>